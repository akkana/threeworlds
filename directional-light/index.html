<html>
<html>
 <head>
 <script src="../js/three.min.js"></script>
  <script src="../js/OrbitControls.js"></script>
  <script type="text/javascript">

   // From http://danni-three.blogspot.com/2013/09/threejs-shadows.html

function set_up_scene() {

    // scene
    var scene = new THREE.Scene();

    // camera
    var camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 0.1, 1000 );
    camera.position.set(0,-12,5);
    camera.lookAt(new THREE.Vector3( 0, 5, 0 ));

    // renderer
    var renderer = new THREE.WebGLRenderer();
    renderer.setSize( window.innerWidth, window.innerHeight );

    renderer.shadowMapEnabled = true;
    renderer.shadowMapSoft = true;

    //controls
    var controls = new THREE.OrbitControls( camera, renderer.domElement );

    //show canvas
    //var container = document.querySelector('#canvas-container');
    var container = document.getElementById('canvas-container');
    console.log("Container:", container);
    container.appendChild(renderer.domElement);

    // lights

    // directional light
    var directionalLight = new THREE.DirectionalLight(0xffffff);
    directionalLight.position.set(5, 0, 5);
    directionalLight.target.position.set(0, 0, 0);

    directionalLight.castShadow = true;
    directionalLight.shadowDarkness = 0.5;
    directionalLight.shadowCameraVisible = true;

    directionalLight.shadowCameraNear = 0;
    directionalLight.shadowCameraFar = 15;

    directionalLight.shadowCameraLeft = -5;
    directionalLight.shadowCameraRight = 5;
    directionalLight.shadowCameraTop = 5;
    directionalLight.shadowCameraBottom = -5;

    scene.add(directionalLight);


    // spotlight
    var spotLight = new THREE.SpotLight( 0xffffff,1 );
    spotLight.position.set( 5, 0, 6 );

    spotLight.castShadow = true;
    spotLight.shadowCameraVisible = true;

    spotLight.target.position.set(-1, 0, 1 );
    spotLight.shadowDarkness = 0.5;

    spotLight.shadowCameraNear = 6;
    spotLight.shadowCameraFar = 13;

    scene.add( spotLight );


    // plane
    var geometry = new THREE.PlaneGeometry(20, 10);
    var material = new THREE.MeshPhongMaterial( { color: 0xffcccc } );
    var plane = new THREE.Mesh( geometry, material );
    plane.receiveShadow = true;
    scene.add(plane);


    // sphere
    const RADIUS = 1;
    const SEGMENTS = 50;
    const RINGS = 50;
    var sphere_geometry = new THREE.SphereGeometry(RADIUS, SEGMENTS, RINGS);
    // var material = new THREE.MeshLambertMaterial( { color: 0x88ffff } );
    var sphere;
    var loader = new THREE.TextureLoader();
    loader.load("../images/color_etopo1_ice-1600.jpg", function (texture) {

        // Map the texture to the material.
        var material = new THREE.MeshLambertMaterial({ map: texture,
                                                       overdraw: 0.5 });
        sphere = new THREE.Mesh(sphere_geometry, material);
        sphere.position.set(2, 1, 1);
        sphere.castShadow = true;
        sphere.receiveShadow = true;
        scene.add(sphere);
    });


    // cone defined using cylinder geometry
    // radiusTop, radiusBottom, height, ...
    var geometry = new THREE.CylinderGeometry(1, 0, 3, 50, 50, false);
    var material = new THREE.MeshLambertMaterial( { color: 0xffffff } );
    var cylinder = new THREE.Mesh( geometry, material );
    cylinder.position.set(-1,-2,1);
    cylinder.rotation.x = -Math.PI / 2;
    cylinder.castShadow = true;
    scene.add( cylinder );

    //render scene
    var render = function () {
     requestAnimationFrame(render);
     renderer.render(scene, camera);
    };

    render();
}

</script>

</head>
<body style="background: black" onload="set_up_scene();">

  <div id="canvas-container" style="position: absolute; left:0px; top:0px"></div>
    var container = document.getElementById('canvas-container');

 </body>
</html>
